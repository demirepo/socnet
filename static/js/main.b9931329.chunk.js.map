{"version":3,"sources":["redux/profileReducer.js","redux/dialogReducer.js","components/common/Spinner/Spinner.module.css","components/Nav/Nav.module.css","api/api.js","components/Users/Users.module.css","components/common/Spinner/Spinner.jsx","components/LoginForm/LoginForm.jsx","redux/authReducer.js","components/Login/Login.jsx","components/Music/Music.jsx","components/News/News.jsx","redux/usersReducer.js","components/Users/Paginator.jsx","components/Users/FollowButton.jsx","components/Users/UserCard.jsx","components/Users/Users.jsx","redux/userSelectors.js","components/Users/UsersContainer.jsx","redux/appReducer .js","components/Nav/Nav.jsx","components/Settings/Settings.jsx","components/Header/Header.jsx","App.js","redux/redux-store.js","index.js","components/Header/Header.module.css","components/common/FormControls/FormControls.jsx","utils/validation.js","components/common/FormControls/FormControls.module.css"],"names":["ADD_POST","SET_PROFILE_DATA","SET_STATUS","initialState","posts","id","text","likes","profileData","statusText","profileReducer","state","action","type","newPost","length","message","profileInputText","addPost","setStatus","setProfileThunkCreator","userId","dispatch","a","usersAPI","getProfile","response","data","getStatusFromServer","profileAPI","getStatus","updateStatusOnServer","updateStatus","console","log","resultCode","POST_MESSAGE","dialogs","name","avatarPath","messages","userId1","author","time","dialogInputText","dialogReducer","mess","newMessage","dialogInput","Date","toLocaleTimeString","postMessage","module","exports","axiosInstance","axios","create","withCredentials","headers","baseURL","getUsers","currentPage","pageSize","get","then","followUser","post","unfollowUser","delete","authAPI","authMe","login","credentials","logout","put","status","Spinner","className","s","spinner","src","alt","min8","validator","minLength","LoginReduxForm","reduxForm","form","handleSubmit","onSubmit","Field","placeholder","component","Input","validate","email","SET_USER_AUTH_DATA","SET_AUTH_IN_PROGRESS","isAuthorized","isFetching","setUserAuthData","authData","authMeThunkCreator","Login","isAuthed","useSelector","auth","useDispatch","to","password","rememberMe","loginThunk","Music","props","music","News","news","TOGGLE_FOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_PAGE_SIZE","SET_IN_PROGRESS","TOGGLE_DISABLE_FOLLOW_BUTTON","users","totalUsersCount","pagesCount","disabledFollowButtonList","toggleFollow","setUsers","setIsFetching","toggleDisableFollowButton","Paginator","setCurrentPage","setPageSize","useState","currentPageInput","setCurrentPageInput","currentPortion","setCurrentPortion","Math","ceil","pages","getFirstPortionElem","getLastPortionElem","result","useEffect","i","push","pageNumber","active","onClick","e","target","innerText","select","value","onChange","pagination","onKeyDown","code","parseInt","floor","onInput","isNaN","onFocus","FollowButton","user","followed","disabled","includes","UserCard","usersItem","avatar","info","Users","map","usersPage","getPageSize","getTotalUsersCount","getCurrentPage","getPagesCount","getisFetching","getdisabledFollowButtonList","UsersContainer","getUsersThunkCreator","toggleFollowThunkCreator","this","React","Component","connect","getState","manageSubscription","subscriptionAction","isUserFollowed","filter","u","SET_IS_INITIALIZED","isInitialized","Nav","navbar","navbar__item","navbar__link","Settings","settings","Header","header","miniavatar","button","DialogsContainer","lazy","ProfileContainer","App","isInit","app","fallback","path","composeEnhancers","rootReducer","combineReducers","profilePage","messagesPage","newUsers","items","photos","large","totalCount","newVal","formReducer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","trace","traceLimit","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById","Textarea","input","meta","rest","gotError","error","touched","maxLength","undefined","required","test"],"mappings":"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","file":"static/js/main.b9931329.chunk.js","sourcesContent":["import { usersAPI, profileAPI } from \"../api/api\";\r\n\r\nconst ADD_POST = \"my-react/profile/addPost\";\r\nconst SET_PROFILE_DATA = \"my-react/profile/setProfileData\";\r\nconst SET_STATUS = \"my-react/profile/setStatus\";\r\n\r\n//===================== INITIAL STATE ============================\r\n\r\nconst initialState = {\r\n  posts: [\r\n    { id: 1, text: \"какой-то текст поста №1\", likes: 10 },\r\n    { id: 2, text: \"какой-то текст поста №2\", likes: 44 },\r\n    { id: 3, text: \"какой-то текст поста №3\", likes: 5 },\r\n  ],\r\n  profileData: {},\r\n  statusText: \"some status\",\r\n};\r\n//===================== REDUCER ============================\r\n\r\nexport default function profileReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case ADD_POST:\r\n      const newPost = {\r\n        id: state.posts[state.posts.length - 1].id + 1, // incrementing last post id and using it as new post id\r\n        text: action.message,\r\n        likes: 0,\r\n      };\r\n      return {\r\n        ...state,\r\n        posts: [...state.posts, newPost],\r\n        profileInputText: \"\",\r\n      };\r\n\r\n    case SET_PROFILE_DATA:\r\n      return { ...state, profileData: action.profileData };\r\n\r\n    case SET_STATUS:\r\n      return { ...state, statusText: action.statusText };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n//===================== ACTION CREATORS ============================\r\n\r\nexport function addPost(message) {\r\n  return { type: ADD_POST, message };\r\n}\r\n\r\nexport function setProfileData(profileData) {\r\n  return { type: SET_PROFILE_DATA, profileData };\r\n}\r\n\r\nexport function setStatus(statusText) {\r\n  return { type: SET_STATUS, statusText };\r\n}\r\n\r\nexport function setProfileThunkCreator(userId) {\r\n  return async (dispatch) => {\r\n    let response = await usersAPI.getProfile(userId);\r\n    dispatch(setProfileData(response.data));\r\n  };\r\n}\r\n\r\nexport function getStatusFromServer(userId) {\r\n  return async (dispatch) => {\r\n    let response = await profileAPI.getStatus(userId);\r\n    dispatch(setStatus(response.data));\r\n  };\r\n}\r\n\r\nexport function updateStatusOnServer(statusText) {\r\n  return async (dispatch) => {\r\n    let response = await profileAPI.updateStatus(statusText);\r\n    console.log(response);\r\n    response.data.resultCode === 0\r\n      ? dispatch(setStatus(statusText))\r\n      : console.log(\"Error during status update\");\r\n  };\r\n}\r\n","const POST_MESSAGE = \"my-react/dialog/postMessage\";\r\n\r\n//===================== INITIAL STATE ============================\r\n\r\nconst initialState = {\r\n  dialogs: [\r\n    { id: 1, name: \"Маяковский\", avatarPath: \"/img/1.jpg\" },\r\n    { id: 2, name: \"Пушкин\", avatarPath: \"/img/2.jpg\" },\r\n    { id: 3, name: \"Есенин\", avatarPath: \"/img/3.jpg\" },\r\n  ],\r\n  messages: {\r\n    userId1: [\r\n      {\r\n        id: 1,\r\n        author: \"me\",\r\n        time: 1000,\r\n        text: \"Выбегу, в улицу тело брошу я\",\r\n      },\r\n      {\r\n        id: 2,\r\n        author: \"opponent\",\r\n        time: 1001,\r\n        text: \"Дикий, обезумлюсь, отчаянием иссечась\",\r\n      },\r\n      {\r\n        id: 3,\r\n        author: \"me\",\r\n        time: 1002,\r\n        text: \"Не надо этого, дорогая, хорошая!\",\r\n      },\r\n      {\r\n        id: 4,\r\n        author: \"opponent\",\r\n        time: 1003,\r\n        text: \"Дай простимся сейчас!\",\r\n      },\r\n    ],\r\n  },\r\n  dialogInputText: \"\",\r\n};\r\n\r\n//===================== REDUCER ============================\r\n\r\nexport default function dialogReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    //======================================\r\n    case POST_MESSAGE:\r\n      const mess = state.messages.userId1;\r\n\r\n      const newMessage = {\r\n        id: mess[mess.length - 1].id + 1, // incrementing last post id and using it as new post id\r\n        author: \"me\",\r\n        text: action.dialogInput,\r\n        time: new Date().toLocaleTimeString(),\r\n      };\r\n      return {\r\n        ...state,\r\n        messages: {\r\n          ...state.messages,\r\n          userId1: [...state.messages.userId1, newMessage],\r\n        },\r\n        dialogInputText: \"\",\r\n      };\r\n    //======================================\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n//===================== ACTION CREATORS ============================\r\n\r\nexport function postMessage(dialogInput) {\r\n  return { type: POST_MESSAGE, dialogInput };\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"Spinner_spinner__3N4ld\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Nav_navbar__3mj2e\",\"navbar__item\":\"Nav_navbar__item__5qP1u\",\"navbar__link\":\"Nav_navbar__link__3vMrm\"};","import axios from \"axios\";\r\n\r\nconst axiosInstance = axios.create({\r\n  withCredentials: true,\r\n  headers: { \"API-KEY\": \"2347c37c-5c55-40d1-89f1-48177d8cbf03\" },\r\n  baseURL: \"https://social-network.samuraijs.com/api/1.0/\",\r\n});\r\n\r\nexport const usersAPI = {\r\n  getUsers(currentPage, pageSize) {\r\n    return axiosInstance\r\n      .get(`users?page=${currentPage}&count=${pageSize}`)\r\n      .then((response) => response.data);\r\n  },\r\n  followUser(userId) {\r\n    return axiosInstance.post(`follow/${userId}`);\r\n  },\r\n  unfollowUser(userId) {\r\n    return axiosInstance.delete(`follow/${userId}`);\r\n  },\r\n  getProfile(userId) {\r\n    return axiosInstance.get(`profile/${userId}`);\r\n  },\r\n};\r\n\r\nexport const authAPI = {\r\n  authMe() {\r\n    return axiosInstance.get(`auth/me`);\r\n  },\r\n  login(credentials) {\r\n    return axiosInstance.post(`auth/login`, credentials);\r\n  },\r\n  logout() {\r\n    return axiosInstance.delete(`auth/login`);\r\n  },\r\n};\r\n\r\nexport const profileAPI = {\r\n  getStatus(userId) {\r\n    return axiosInstance.get(`/profile/status/${userId}`);\r\n  },\r\n  updateStatus(statusText) {\r\n    return axiosInstance.put(`/profile/status/`, { status: `${statusText}` });\r\n  },\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersItem\":\"Users_usersItem__2FaIv\",\"avatar\":\"Users_avatar__3Z7lH\",\"info\":\"Users_info__1GZTf\",\"name\":\"Users_name__31wp7\",\"location\":\"Users_location__1hvEN\",\"pageNumber\":\"Users_pageNumber__2X9rY\",\"active\":\"Users_active__3Xz9D\",\"pagination\":\"Users_pagination__1cK-I\",\"select\":\"Users_select__1N7Ba\"};","import s from \"./Spinner.module.css\";\r\nexport default function Spinner() {\r\n  return (\r\n    <img className={s.spinner} src=\"/img/spinner.gif\" alt=\"идет загрузка...\" />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { Input } from \"../common/FormControls/FormControls\";\r\nimport validator from \"../../utils/validation\";\r\n\r\nconst min8 = validator.minLength(8);\r\nfunction LoginForm({ handleSubmit }) {\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <Field\r\n        placeholder={\"login\"}\r\n        name={\"login\"}\r\n        component={Input}\r\n        type={\"text\"}\r\n        validate={[validator.email]}\r\n      />\r\n      <br />\r\n      <Field\r\n        placeholder={\"password\"}\r\n        name={\"password\"}\r\n        component={Input}\r\n        type={\"password\"}\r\n        validate={[min8]}\r\n      />\r\n      <br />\r\n      <Field component={\"input\"} type={\"checkbox\"} name=\"rememberMe\" id=\"\" />\r\n      запомнить меня\r\n      <br />\r\n      <div>\r\n        <button type=\"submit\">Войти</button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\nlet LoginReduxForm = reduxForm({ form: \"login\" })(LoginForm);\r\nexport default LoginReduxForm;\r\n","import { authAPI } from \"../api/api\";\r\nconst SET_USER_AUTH_DATA = \"my-react/auth/setUserAuthData\";\r\nconst SET_AUTH_IN_PROGRESS = \"my-react/auth/setAuthInProgress\";\r\n\r\n//===================== INITIAL STATE ============================\r\n\r\nconst initialState = {\r\n  id: null,\r\n  login: null,\r\n  email: null,\r\n  isAuthorized: false,\r\n  isFetching: false,\r\n};\r\n\r\n//===================== REDUCER ============================\r\n\r\nexport default function authReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    //======================================\r\n    case SET_USER_AUTH_DATA:\r\n      return { ...state, ...action.authData };\r\n\r\n    case SET_AUTH_IN_PROGRESS:\r\n      return { ...state, isFetching: action.isFetching };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n//===================== ACTION CREATORS ============================\r\n\r\nexport function setUserAuthData(id, login, email, isAuthorized) {\r\n  return {\r\n    type: SET_USER_AUTH_DATA,\r\n    authData: { id, login, email, isAuthorized },\r\n  };\r\n}\r\n\r\nexport function setAuthisFetching(isFetching) {\r\n  return {\r\n    type: SET_AUTH_IN_PROGRESS,\r\n    isFetching,\r\n  };\r\n}\r\n\r\n//============================THUNKS=====================================\r\n\r\nexport function authMeThunkCreator() {\r\n  return (dispatch) => {\r\n    return authAPI.authMe().then((response) => {\r\n      if (response.status !== 200) console.log(\"Server error\", response.status);\r\n      if (response.data.resultCode === 0) {\r\n        const { id, login, email } = response.data.data;\r\n        const isAuthorized = true;\r\n        dispatch(setUserAuthData(id, login, email, isAuthorized));\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport function loginThunk(credentials) {\r\n  return async (dispatch) => {\r\n    let response = await authAPI.login(credentials);\r\n    if (response.data.resultCode === 0) {\r\n      await dispatch(authMeThunkCreator());\r\n      console.log(\"Login successful\");\r\n    } else {\r\n      console.log(response.data.messages);\r\n    }\r\n  };\r\n}\r\n\r\nexport function logoutThunk() {\r\n  return async (dispatch) => {\r\n    let response = await authAPI.logout();\r\n    if (response.data.resultCode === 0) {\r\n      dispatch(setUserAuthData(null, null, null, false));\r\n      console.log(\"You have logged out\");\r\n    } else {\r\n      console.log(response.data.messages);\r\n    }\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport LoginForm from \"../LoginForm/LoginForm\";\r\nimport { loginThunk } from \"../../redux/authReducer\";\r\nimport { Redirect } from \"react-router\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nexport default function Login() {\r\n  const isAuthed = useSelector((state) => state.auth.isAuthorized);\r\n  const dispatch = useDispatch();\r\n\r\n  const onSubmit = (data) => {\r\n    const credentials = {\r\n      email: data.login,\r\n      password: data.password,\r\n      rememberMe: data.rememberMe,\r\n    };\r\n    dispatch(loginThunk(credentials));\r\n  };\r\n\r\n  if (isAuthed) return <Redirect to={\"/profile\"} />;\r\n\r\n  return (\r\n    <div>\r\n      <h2>Login</h2>\r\n      <LoginForm onSubmit={onSubmit} />\r\n    </div>\r\n  );\r\n}\r\n","import s from \"./Music.module.css\";\r\n\r\nexport default function Music(props) {\r\n  return <div className={s.music}>Music</div>;\r\n}\r\n","import s from \"./News.module.css\";\r\n\r\nexport default function News(props) {\r\n  return <div className={s.news}>News</div>;\r\n}\r\n","import { usersAPI } from \"../api/api\";\r\n\r\nconst TOGGLE_FOLLOW = \"my-react/users/toggleFollow\";\r\nconst SHOW_MORE = \"my-react/users/showMore\";\r\nconst SET_USERS = \"my-react/users/setUsers\";\r\nconst SET_CURRENT_PAGE = \"my-react/users/setCurrentPage\";\r\nconst SET_PAGE_SIZE = \"my-react/users/setPageSize\";\r\nconst SET_IN_PROGRESS = \"my-react/users/setisFetching\";\r\nconst TOGGLE_DISABLE_FOLLOW_BUTTON = \"my-react/users/toggleDisableFollowButton\";\r\n//===================== INITIAL STATE ============================\r\n\r\nconst initialState = {\r\n  users: [],\r\n  pageSize: 100,\r\n  totalUsersCount: 0,\r\n  currentPage: 1,\r\n  pagesCount: 1,\r\n  isFetching: false,\r\n  disabledFollowButtonList: [],\r\n};\r\n//===================== REDUCER ============================\r\n\r\nexport default function usersReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case TOGGLE_FOLLOW:\r\n      return {\r\n        ...state,\r\n        users: state.users.map((user) => {\r\n          if (user.id === action.userId) {\r\n            return { ...user, followed: user.followed ? false : true };\r\n          }\r\n          return user;\r\n        }),\r\n      };\r\n\r\n    case SET_USERS:\r\n      const newUsers = action.data.items.map((user) => ({\r\n        id: user.id,\r\n        name: user.name,\r\n        followed: user.followed,\r\n        avatar: user.photos.large || \"/img/ava.jpg\",\r\n        status: user.status,\r\n      }));\r\n\r\n      return {\r\n        ...state,\r\n        users: [...newUsers],\r\n        totalUsersCount: action.data.totalCount,\r\n      };\r\n\r\n    case SET_CURRENT_PAGE:\r\n      return { ...state, currentPage: +action.currentPage };\r\n\r\n    case SET_PAGE_SIZE:\r\n      return { ...state, pageSize: +action.pageSize };\r\n\r\n    case SET_IN_PROGRESS:\r\n      return { ...state, isFetching: action.isFetching };\r\n\r\n    case TOGGLE_DISABLE_FOLLOW_BUTTON:\r\n      const newVal = state.disabledFollowButtonList.includes(action.userId)\r\n        ? state.disabledFollowButtonList.filter((id) => id !== action.userId)\r\n        : [...state.disabledFollowButtonList, action.userId];\r\n      return {\r\n        ...state,\r\n        disabledFollowButtonList: newVal,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n//===================== ACTION CREATORS ============================\r\n\r\nexport function toggleFollow(userId) {\r\n  return { type: TOGGLE_FOLLOW, userId };\r\n}\r\nexport function showMore() {\r\n  return { type: SHOW_MORE };\r\n}\r\nexport function setUsers(data) {\r\n  return { type: SET_USERS, data };\r\n}\r\nexport function setCurrentPage(currentPage) {\r\n  return { type: SET_CURRENT_PAGE, currentPage: currentPage };\r\n}\r\nexport function setPageSize(pageSize) {\r\n  return { type: SET_PAGE_SIZE, pageSize };\r\n}\r\nexport function setIsFetching(isFetching) {\r\n  return { type: SET_IN_PROGRESS, isFetching };\r\n}\r\nexport function toggleDisableFollowButton(userId) {\r\n  return {\r\n    type: TOGGLE_DISABLE_FOLLOW_BUTTON,\r\n    userId,\r\n  };\r\n}\r\n//===================== THUNK CREATORS ============================\r\nexport function getUsersThunkCreator(currentPage, pageSize) {\r\n  return (dispatch) => {\r\n    dispatch(setIsFetching(true));\r\n    usersAPI.getUsers(currentPage, pageSize).then((response) => {\r\n      dispatch(setUsers(response));\r\n      dispatch(setIsFetching(false));\r\n    });\r\n  };\r\n}\r\n\r\nexport function toggleFollowThunkCreator(userId) {\r\n  return async (dispatch, getState) => {\r\n    const {\r\n      usersPage: { users },\r\n    } = getState();\r\n    let isUserFollowed = users.filter((u) => u.id === userId)[0].followed;\r\n    dispatch(toggleDisableFollowButton(userId)); // disabling button during query\r\n\r\n    async function manageSubscription(subscriptionAction) {\r\n      const response = await subscriptionAction;\r\n      if (response.data.resultCode === 0) {\r\n        dispatch(toggleFollow(userId));\r\n        dispatch(toggleDisableFollowButton(userId));\r\n      }\r\n    }\r\n    isUserFollowed\r\n      ? manageSubscription(usersAPI.unfollowUser(userId))\r\n      : manageSubscription(usersAPI.followUser(userId));\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport s from \"./Users.module.css\";\r\n\r\nexport default function Paginator({\r\n  totalUsersCount,\r\n  currentPage,\r\n  setCurrentPage,\r\n  pageSize,\r\n  setPageSize,\r\n}) {\r\n  let [currentPageInput, setCurrentPageInput] = useState(currentPage);\r\n  let [currentPortion, setCurrentPortion] = useState(0);\r\n  const portionSize = 10;\r\n\r\n  let pagesCount = Math.ceil(totalUsersCount / pageSize);\r\n  const pages = [];\r\n\r\n  const getFirstPortionElem = () => {\r\n    return 1 + currentPortion * portionSize;\r\n  };\r\n  const getLastPortionElem = () => {\r\n    let result = currentPortion * portionSize + portionSize;\r\n    return result <= pagesCount ? result : pagesCount;\r\n  };\r\n\r\n  useEffect(() => {\r\n    setCurrentPageInput(currentPage);\r\n  }, [currentPage]);\r\n\r\n  const handleInput = (e) => {\r\n    let value = e.target.value;\r\n    if (isNaN(value)) return;\r\n    if (value === \"\") {\r\n      setCurrentPageInput(\"\");\r\n    } else {\r\n      setCurrentPageInput(parseInt(value));\r\n    }\r\n  };\r\n\r\n  const onEnter = (e) => {\r\n    if (e.code === \"Enter\") {\r\n      let value = parseInt(e.target.value);\r\n      if (value) {\r\n        if (value < 1) {\r\n          value = 1;\r\n        } else if (value > pagesCount) {\r\n          value = pagesCount;\r\n          console.log(value);\r\n        } else {\r\n          setCurrentPage(value);\r\n          setCurrentPortion(Math.floor((value - 1) / portionSize));\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const decresePortion = () => {\r\n    if (currentPortion > 0) {\r\n      setCurrentPortion(--currentPortion);\r\n      setCurrentPage(getFirstPortionElem());\r\n    }\r\n  };\r\n\r\n  const incresePortion = () => {\r\n    if (currentPortion < Math.floor(pagesCount / portionSize)) {\r\n      setCurrentPortion(++currentPortion);\r\n      setCurrentPage(getFirstPortionElem());\r\n    }\r\n  };\r\n\r\n  for (let i = getFirstPortionElem(); i <= getLastPortionElem(); i++) {\r\n    pages.push(\r\n      <span\r\n        className={\r\n          i === currentPage ? s.pageNumber + \" \" + s.active : s.pageNumber\r\n        }\r\n        key={i}\r\n        onClick={(e) => {\r\n          setCurrentPage(e.target.innerText);\r\n        }}\r\n      >\r\n        {i}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <div className={s.select}>\r\n          Результатов на странице:&nbsp;\r\n          <select\r\n            value={pageSize}\r\n            onChange={(e) => setPageSize(currentPage, e.target.value)}\r\n          >\r\n            <option value=\"100\">100</option>\r\n            <option value=\"50\">50</option>\r\n            <option value=\"10\">10</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div className={s.pagination}>\r\n        <button onClick={decresePortion}>prev 10</button>\r\n        <input\r\n          type=\"text\"\r\n          value={currentPageInput}\r\n          onKeyDown={onEnter}\r\n          onInput={handleInput}\r\n          onFocus={(e) => e.target.select()}\r\n        />\r\n\r\n        <div>{pages}</div>\r\n        <button onClick={incresePortion}>next 10</button>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","export default function FollowButton(props) {\r\n  return props.user.followed ? (\r\n    <button\r\n      disabled={props.disabledFollowButtonList.includes(props.user.id)}\r\n      onClick={() => props.toggleFollow(props.user.id)}\r\n    >\r\n      Отписаться\r\n    </button>\r\n  ) : (\r\n    <button\r\n      disabled={props.disabledFollowButtonList.includes(props.user.id)}\r\n      onClick={() => props.toggleFollow(props.user.id)}\r\n    >\r\n      Подписаться\r\n    </button>\r\n  );\r\n}\r\n","import s from \"./Users.module.css\";\r\nimport React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport FollowButton from \"./FollowButton\";\r\n\r\nexport default function UserCard({\r\n  user,\r\n  toggleFollow,\r\n  disabledFollowButtonList,\r\n}) {\r\n  return (\r\n    <div>\r\n      <div className={s.usersItem}>\r\n        <div className={s.avatar}>\r\n          <NavLink to={`/profile/${user.id}`}>\r\n            <img src={user.avatar} alt=\"avatar\" />\r\n          </NavLink>\r\n        </div>\r\n        <div className={s.info}>\r\n          <NavLink to={`/profile/${user.id}`}>\r\n            <p className={s.name}>{user.name}</p>\r\n          </NavLink>\r\n          <FollowButton\r\n            disabledFollowButtonList={disabledFollowButtonList}\r\n            user={user}\r\n            toggleFollow={toggleFollow}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import Spinner from \"../common/Spinner/Spinner\";\r\nimport Paginator from \"./Paginator\";\r\nimport UserCard from \"./UserCard\";\r\n\r\nexport default function Users({\r\n  users,\r\n  toggleFollow,\r\n  disabledFollowButtonList,\r\n  totalUsersCount,\r\n  pageSize,\r\n  currentPage,\r\n  setCurrentPage,\r\n  setPageSize,\r\n  isFetching,\r\n}) {\r\n  return (\r\n    <div>\r\n      {isFetching && <Spinner />}\r\n      <Paginator\r\n        totalUsersCount={totalUsersCount}\r\n        pageSize={pageSize}\r\n        currentPage={currentPage}\r\n        setCurrentPage={setCurrentPage}\r\n        setPageSize={setPageSize}\r\n      />\r\n      {users.map((user) => (\r\n        <UserCard\r\n          key={user.id}\r\n          user={user}\r\n          toggleFollow={toggleFollow}\r\n          disabledFollowButtonList={disabledFollowButtonList}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","export const getUsers = (state) => {\r\n  return state.usersPage.users;\r\n};\r\n\r\nexport const getPageSize = (state) => {\r\n  return state.usersPage.pageSize;\r\n};\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n  return state.usersPage.totalUsersCount;\r\n};\r\n\r\nexport const getCurrentPage = (state) => {\r\n  return state.usersPage.currentPage;\r\n};\r\n\r\nexport const getPagesCount = (state) => {\r\n  return state.usersPage.pagesCount;\r\n};\r\n\r\nexport const getisFetching = (state) => {\r\n  return state.usersPage.isFetching;\r\n};\r\n\r\nexport const getdisabledFollowButtonList = (state) => {\r\n  return state.usersPage.disabledFollowButtonList;\r\n};\r\n","import { connect } from \"react-redux\";\r\nimport {\r\n  setUsers,\r\n  toggleFollow,\r\n  setCurrentPage,\r\n  setIsFetching,\r\n  toggleDisableFollowButton,\r\n  getUsersThunkCreator,\r\n  toggleFollowThunkCreator,\r\n  setPageSize,\r\n} from \"../../redux/usersReducer\";\r\nimport React from \"react\";\r\nimport Users from \"./Users\";\r\nimport {\r\n  getUsers,\r\n  getTotalUsersCount,\r\n  getCurrentPage,\r\n  getPagesCount,\r\n  getisFetching,\r\n  getdisabledFollowButtonList,\r\n  getPageSize,\r\n} from \"../../redux/userSelectors\";\r\n\r\nclass UsersContainer extends React.Component {\r\n  componentDidMount() {\r\n    this.props.getUsersThunkCreator(\r\n      this.props.currentPage,\r\n      this.props.pageSize\r\n    );\r\n  }\r\n\r\n  setPageSize = (currentPage, pageSize) => {\r\n    this.props.setPageSize(pageSize);\r\n    this.props.getUsersThunkCreator(currentPage, pageSize);\r\n  };\r\n\r\n  toggleFollow = (userId) => {\r\n    this.props.toggleFollowThunkCreator(userId);\r\n  };\r\n\r\n  setCurrentPage = (currentPage) => {\r\n    this.props.setCurrentPage(currentPage);\r\n    this.props.getUsersThunkCreator(currentPage, this.props.pageSize);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Users\r\n        users={this.props.users}\r\n        pageSize={this.props.pageSize}\r\n        totalUsersCount={this.props.totalUsersCount}\r\n        currentPage={this.props.currentPage}\r\n        pagesCount={this.props.pagesCount}\r\n        isFetching={this.props.isFetching}\r\n        disabledFollowButtonList={this.props.disabledFollowButtonList}\r\n        setPageSize={this.setPageSize}\r\n        toggleFollow={this.toggleFollow}\r\n        setCurrentPage={this.setCurrentPage}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    pageSize: getPageSize(state),\r\n    users: getUsers(state),\r\n    totalUsersCount: getTotalUsersCount(state),\r\n    currentPage: getCurrentPage(state),\r\n    pagesCount: getPagesCount(state),\r\n    isFetching: getisFetching(state),\r\n    disabledFollowButtonList: getdisabledFollowButtonList(state),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  setUsers,\r\n  setPageSize,\r\n  toggleFollow,\r\n  setCurrentPage,\r\n  setIsFetching,\r\n  toggleDisableFollowButton,\r\n  getUsersThunkCreator,\r\n  toggleFollowThunkCreator,\r\n})(UsersContainer);\r\n","import { authMeThunkCreator } from \"./authReducer\";\r\nconst SET_IS_INITIALIZED = \"my-react/app/setIsInitialized\";\r\n\r\n//===================== INITIAL STATE ============================\r\n\r\nconst initialState = {\r\n  isInitialized: false,\r\n};\r\n\r\n//===================== REDUCER ============================\r\n\r\nexport default function appReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    //======================================\r\n    case SET_IS_INITIALIZED:\r\n      return { ...state, isInitialized: true };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n//===================== ACTION CREATORS ============================\r\n\r\nexport function setIsInitialized() {\r\n  return {\r\n    type: SET_IS_INITIALIZED,\r\n  };\r\n}\r\n\r\n//============================THUNKS=====================================\r\n\r\nexport function initializeApp() {\r\n  return async (dispatch) => {\r\n    await dispatch(authMeThunkCreator());\r\n    await dispatch(setIsInitialized());\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport s from \"./Nav.module.css\";\r\n\r\nexport default function Nav() {\r\n  return (\r\n    <nav className={s.navbar}>\r\n      <ul>\r\n        <li className={s.navbar__item}>\r\n          <NavLink className={s.navbar__link} to=\"/profile\">\r\n            Profile\r\n          </NavLink>\r\n        </li>\r\n        <li className={s.navbar__item}>\r\n          <NavLink className={s.navbar__link} to=\"/dialogs\">\r\n            Dialogs\r\n          </NavLink>\r\n        </li>\r\n        <li className={s.navbar__item}>\r\n          <NavLink className={s.navbar__link} to=\"/users\">\r\n            Find&nbsp;users\r\n          </NavLink>\r\n        </li>\r\n        <li className={s.navbar__item}>\r\n          <NavLink className={s.navbar__link} to=\"/news\">\r\n            News\r\n          </NavLink>\r\n        </li>\r\n        <li className={s.navbar__item}>\r\n          <NavLink className={s.navbar__link} to=\"/music\">\r\n            Music\r\n          </NavLink>\r\n        </li>\r\n        <li className={s.navbar__item}>\r\n          <NavLink className={s.navbar__link} to=\"/settings\">\r\n            Settings\r\n          </NavLink>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n}\r\n","import s from \"./Settings.module.css\";\r\n\r\nexport default function Settings(props) {\r\n  return <div className={s.settings}>Settings</div>;\r\n}\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport s from \"./Header.module.css\";\r\nimport { logoutThunk } from \"../../redux/authReducer\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nexport default function Header() {\r\n  const dispatch = useDispatch();\r\n  const isAuthed = useSelector((state) => state.auth.isAuthorized);\r\n  const login = useSelector((state) => state.auth.login);\r\n  const logout = () => dispatch(logoutThunk());\r\n\r\n  return (\r\n    <header className={s.header}>\r\n      <img src=\"/img/logo.png\" alt=\"logo\"></img>\r\n      {isAuthed ? (\r\n        <div className={s.login}>\r\n          <img className={s.miniavatar} src=\"/img/ava-blue.jpg\" alt=\"ava\" />\r\n          {login}\r\n          <button className={s.button} onClick={logout}>\r\n            Logout\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <NavLink to={\"/login\"}>\r\n          <div className={s.login}>Login</div>\r\n        </NavLink>\r\n      )}\r\n    </header>\r\n  );\r\n}\r\n","import React, { Suspense, useEffect } from \"react\";\r\nimport { BrowserRouter, Route } from \"react-router-dom\";\r\nimport \"./App.css\";\r\nimport Spinner from \"./components/common/Spinner/Spinner.jsx\";\r\nimport Login from \"./components/Login/Login\";\r\nimport Music from \"./components/Music/Music\";\r\nimport News from \"./components/News/News\";\r\nimport UsersContainer from \"./components/Users/UsersContainer\";\r\nimport { initializeApp } from \"./redux/appReducer \";\r\nimport Nav from \"./components/Nav/Nav\";\r\nimport Settings from \"./components/Settings/Settings\";\r\nimport Header from \"./components/Header/Header\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nconst DialogsContainer = React.lazy(() =>\r\n  import(\"./components/Dialogs/DialogsContainer\")\r\n);\r\nconst ProfileContainer = React.lazy(() =>\r\n  import(\"./components/Profile/ProfileContainer\")\r\n);\r\n\r\nexport default function App() {\r\n  console.log(\"render\");\r\n  const dispatch = useDispatch();\r\n  const isInit = useSelector((state) => state.app.isInitialized);\r\n\r\n  useEffect(() => dispatch(initializeApp()), [dispatch]);\r\n\r\n  if (!isInit) return <Spinner />;\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <div className=\"wrapper\">\r\n        <Header />\r\n        <Nav />\r\n        <div className=\"wrapper-content\">\r\n          <Suspense fallback={<Spinner />}>\r\n            <Route path=\"/profile/:userId?\" component={ProfileContainer} />\r\n            <Route path=\"/dialogs\" component={DialogsContainer} />\r\n            <Route path=\"/users\" component={UsersContainer} />\r\n            <Route path=\"/news\" component={News} />\r\n            <Route path=\"/music\" component={Music} />\r\n            <Route path=\"/settings\" component={Settings} />\r\n            <Route path=\"/login\" component={Login} />\r\n          </Suspense>\r\n        </div>\r\n      </div>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n","import { combineReducers, createStore, applyMiddleware, compose } from \"redux\";\r\nimport profileReducer from \"./profileReducer\";\r\nimport dialogReducer from \"./dialogReducer\";\r\nimport usersReducer from \"./usersReducer\";\r\nimport authReducer from \"./authReducer\";\r\nimport { reducer as formReducer } from \"redux-form\";\r\nimport thunk from \"redux-thunk\";\r\nimport appReducer from \"./appReducer \";\r\n\r\nlet rootReducer = combineReducers({\r\n  profilePage: profileReducer,\r\n  messagesPage: dialogReducer,\r\n  usersPage: usersReducer,\r\n  auth: authReducer,\r\n  form: formReducer,\r\n  app: appReducer,\r\n});\r\n\r\nlet composeEnhancers;\r\n\r\nif (window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) {\r\n  composeEnhancers =\r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n      trace: true,\r\n      traceLimit: 25,\r\n    }) || compose;\r\n} else {\r\n  composeEnhancers = compose;\r\n}\r\n\r\nlet store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\nimport store from \"./redux/redux-store\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nReactDOM.render(\r\n  // <React.StrictMode>\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  // </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\nwindow.store = store; // for debugging purpose\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3PC1q\",\"login\":\"Header_login__23fZj\",\"button\":\"Header_button__oyWFO\",\"miniavatar\":\"Header_miniavatar__37X4f\"};","import React from \"react\";\r\nimport s from \"./FormControls.module.css\";\r\n\r\nconst Textarea = (props) => {\r\n  const { input, meta, ...rest } = props;\r\n  const gotError = meta.error && meta.touched && input.value;\r\n  return (\r\n    <div>\r\n      <div className={gotError ? s.error : \"\"}>\r\n        <textarea {...input} {...rest} />\r\n      </div>\r\n      {gotError && <span>{meta.error}</span>}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Input = (props) => {\r\n  const { input, meta, ...rest } = props;\r\n  const gotError = meta.error && meta.touched && input.value;\r\n  return (\r\n    <div>\r\n      <div className={gotError ? s.error : \"\"}>\r\n        <input {...input} {...rest} />\r\n      </div>\r\n      {gotError && <span>{meta.error}</span>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { Input };\r\nexport { Textarea };\r\n","const validator = {\r\n  maxLength: (maxLength) => {\r\n    return (value) => {\r\n      return value && value.length < maxLength\r\n        ? undefined\r\n        : `Строка должна быть меньше ${maxLength} символов `;\r\n    };\r\n  },\r\n  minLength: (minLength) => {\r\n    return (value) => {\r\n      return value && value.length > minLength\r\n        ? undefined\r\n        : `Длина должна быть не менее ${minLength} символов `;\r\n    };\r\n  },\r\n  required: (value) => {\r\n    return value ? undefined : \"Поле обязательно к заполнению\";\r\n  },\r\n  email: (value) => {\r\n    const rx = /.+@.+\\..{2,}/;\r\n    return rx.test(value) ? undefined : \"Введите корректный email\";\r\n  },\r\n};\r\nexport default validator;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"FormControls_error__LvMRr\"};"],"sourceRoot":""}